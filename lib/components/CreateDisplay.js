Object.defineProperty(exports,"__esModule",{value:true});var _jsxFileName='app/components/CreateDisplay.js';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _reactNative=require('react-native');var _reactNativeFirebase=require('react-native-firebase');var _reactNativeFirebase2=_interopRequireDefault(_reactNativeFirebase);var _reactNativeRouterFlux=require('react-native-router-flux');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var ImagePicker=require('react-native-image-picker');var uuid=require('uuid-js');var options={title:'Select Avatar',customButtons:[{name:'fb',title:'Choose Photo from Facebook'}],storageOptions:{skipBackup:true,path:'images'}};var CATEGORY_ANIMATION='Animation';var CATEGORY_RESIDENTIAL='Residential';var CATEGORY_MUSIC='Music';var CATEGORY_CHARITABLE='Charitable';var CreateDisplay=function(_Component){_inherits(CreateDisplay,_Component);function CreateDisplay(){_classCallCheck(this,CreateDisplay);var _this=_possibleConstructorReturn(this,(CreateDisplay.__proto__||Object.getPrototypeOf(CreateDisplay)).call(this));_this.state={displayTitle:'',displayDescription:'',displayCategory:'Animation',avatarSource:null};return _this;}_createClass(CreateDisplay,[{key:'render',value:function render(){var _this2=this;var imageCapture=_react2.default.createElement(_reactNative.View,{style:styles.emptyCameraContainer,__source:{fileName:_jsxFileName,lineNumber:55}},_react2.default.createElement(_reactNative.Image,{source:require('../img/icon_camera.png'),__source:{fileName:_jsxFileName,lineNumber:56}}),_react2.default.createElement(_reactNative.Text,{style:styles.cameraText,__source:{fileName:_jsxFileName,lineNumber:56}},'ADD COVER PHOTO'));if(this.state.avatarSource!=null){imageCapture=_react2.default.createElement(_reactNative.Image,{style:styles.cameraIcon,source:this.state.avatarSource,__source:{fileName:_jsxFileName,lineNumber:60}});}return _react2.default.createElement(_reactNative.ImageBackground,{resizeMode:'cover',source:require('../img/map_add_display.png'),style:styles.container,__source:{fileName:_jsxFileName,lineNumber:65}},_react2.default.createElement(_reactNative.View,{style:styles.navigation,__source:{fileName:_jsxFileName,lineNumber:69}},_react2.default.createElement(_reactNative.TouchableOpacity,{style:styles.cancelButton,onPress:this.onCancelPressed,__source:{fileName:_jsxFileName,lineNumber:70}},_react2.default.createElement(_reactNative.Text,{style:styles.cancelText,__source:{fileName:_jsxFileName,lineNumber:71}},'Cancel')),_react2.default.createElement(_reactNative.Text,{style:styles.titleText,__source:{fileName:_jsxFileName,lineNumber:74}},'Add new display'),_react2.default.createElement(_reactNative.TouchableOpacity,{style:styles.saveButton,onPress:this.onSavePressed.bind(this),__source:{fileName:_jsxFileName,lineNumber:76}},_react2.default.createElement(_reactNative.Text,{style:styles.saveText,__source:{fileName:_jsxFileName,lineNumber:77}},'Save'))),_react2.default.createElement(_reactNative.ImageBackground,{style:styles.mainContainer,source:require('../img/add_display_background.png'),__source:{fileName:_jsxFileName,lineNumber:81}},_react2.default.createElement(_reactNative.View,{style:styles.inputContainer,__source:{fileName:_jsxFileName,lineNumber:83}},_react2.default.createElement(_reactNative.View,{style:styles.addDisplayIcon,__source:{fileName:_jsxFileName,lineNumber:84}},_react2.default.createElement(_reactNative.Image,{source:require('../img/icon_add_display.png'),__source:{fileName:_jsxFileName,lineNumber:85}})),_react2.default.createElement(_reactNative.TextInput,{style:styles.displayTitleText,onChangeText:function onChangeText(text){return _this2.setState({displayTitle:text});},value:this.state.displayTitle,placeholder:'Give it a name...',__source:{fileName:_jsxFileName,lineNumber:88}}),_react2.default.createElement(_reactNative.TextInput,{style:styles.displayDescriptionText,onChangeText:function onChangeText(text){return _this2.setState({displayDescription:text});},value:this.state.displayDescription,placeholder:'What you can find here?',__source:{fileName:_jsxFileName,lineNumber:95}}),_react2.default.createElement(_reactNative.View,{style:styles.categoriesContainer,__source:{fileName:_jsxFileName,lineNumber:102}},_react2.default.createElement(_reactNative.View,{style:styles.categoryContainer,__source:{fileName:_jsxFileName,lineNumber:103}},_react2.default.createElement(_reactNative.TouchableOpacity,{style:styles.categoryImageContainer,onPress:function onPress(){return _this2.setState({'displayCategory':CATEGORY_ANIMATION});},__source:{fileName:_jsxFileName,lineNumber:104}},_react2.default.createElement(_reactNative.Image,{source:this.state.displayCategory==CATEGORY_ANIMATION?require('../img/category_active.png'):require('../img/category_inactive.png'),__source:{fileName:_jsxFileName,lineNumber:105}}),_react2.default.createElement(_reactNative.Image,{style:styles.categoryInnerImage,source:this.state.displayCategory==CATEGORY_ANIMATION?require('../img/category_icon_animation_inactive.png'):require('../img/category_icon_animation_active.png'),__source:{fileName:_jsxFileName,lineNumber:106}})),_react2.default.createElement(_reactNative.Text,{style:styles.categoryText,__source:{fileName:_jsxFileName,lineNumber:108}},'ANIMATION')),_react2.default.createElement(_reactNative.View,{style:styles.categoryContainer,__source:{fileName:_jsxFileName,lineNumber:111}},_react2.default.createElement(_reactNative.TouchableOpacity,{style:styles.categoryImageContainer,onPress:function onPress(){return _this2.setState({'displayCategory':CATEGORY_MUSIC});},__source:{fileName:_jsxFileName,lineNumber:112}},_react2.default.createElement(_reactNative.Image,{source:this.state.displayCategory==CATEGORY_MUSIC?require('../img/category_active.png'):require('../img/category_inactive.png'),__source:{fileName:_jsxFileName,lineNumber:113}}),_react2.default.createElement(_reactNative.Image,{style:styles.categoryInnerImage,source:this.state.displayCategory==CATEGORY_MUSIC?require('../img/category_icon_music_inactive.png'):require('../img/category_icon_music_active.png'),__source:{fileName:_jsxFileName,lineNumber:114}})),_react2.default.createElement(_reactNative.Text,{style:styles.categoryText,__source:{fileName:_jsxFileName,lineNumber:116}},'MUSIC')),_react2.default.createElement(_reactNative.View,{style:styles.categoryContainer,__source:{fileName:_jsxFileName,lineNumber:119}},_react2.default.createElement(_reactNative.TouchableOpacity,{style:styles.categoryImageContainer,onPress:function onPress(){return _this2.setState({'displayCategory':CATEGORY_RESIDENTIAL});},__source:{fileName:_jsxFileName,lineNumber:120}},_react2.default.createElement(_reactNative.Image,{source:this.state.displayCategory==CATEGORY_RESIDENTIAL?require('../img/category_active.png'):require('../img/category_inactive.png'),__source:{fileName:_jsxFileName,lineNumber:121}}),_react2.default.createElement(_reactNative.Image,{style:styles.categoryInnerImage,source:this.state.displayCategory==CATEGORY_RESIDENTIAL?require('../img/category_icon_neighborhood_inactive.png'):require('../img/category_icon_neighborhood_active.png'),__source:{fileName:_jsxFileName,lineNumber:122}})),_react2.default.createElement(_reactNative.Text,{style:styles.categoryText,__source:{fileName:_jsxFileName,lineNumber:124}},'NEIGHBORHOOD')),_react2.default.createElement(_reactNative.View,{style:styles.categoryContainer,__source:{fileName:_jsxFileName,lineNumber:127}},_react2.default.createElement(_reactNative.TouchableOpacity,{style:styles.categoryImageContainer,onPress:function onPress(){return _this2.setState({'displayCategory':CATEGORY_CHARITABLE});},__source:{fileName:_jsxFileName,lineNumber:128}},_react2.default.createElement(_reactNative.Image,{source:this.state.displayCategory==CATEGORY_CHARITABLE?require('../img/category_active.png'):require('../img/category_inactive.png'),__source:{fileName:_jsxFileName,lineNumber:129}}),_react2.default.createElement(_reactNative.Image,{style:styles.categoryInnerImage,source:this.state.displayCategory==CATEGORY_CHARITABLE?require('../img/category_icon_charitable_inactive.png'):require('../img/category_icon_charitable_active.png'),__source:{fileName:_jsxFileName,lineNumber:130}})),_react2.default.createElement(_reactNative.Text,{style:styles.categoryText,__source:{fileName:_jsxFileName,lineNumber:132}},'CHARITABLE'))),_react2.default.createElement(_reactNative.TouchableOpacity,{style:styles.cameraContainer,onPress:this.onAddCoverPhoto.bind(this),__source:{fileName:_jsxFileName,lineNumber:136}},imageCapture),_react2.default.createElement(_reactNative.TouchableOpacity,{style:styles.submitButton,onPress:this.onSavePressed.bind(this),__source:{fileName:_jsxFileName,lineNumber:140}},_react2.default.createElement(_reactNative.Image,{source:require('../img/round_button.png'),__source:{fileName:_jsxFileName,lineNumber:141}}),_react2.default.createElement(_reactNative.Text,{style:styles.submitText,__source:{fileName:_jsxFileName,lineNumber:142}},'ADD NEW DISPLAY')))));}},{key:'onCancelPressed',value:function onCancelPressed(){_reactNativeRouterFlux.Actions.pop();}},{key:'onSavePressed',value:function onSavePressed(){var storageRef=_reactNativeFirebase2.default.storage().ref();var imagesRef=storageRef.child('user_created/'+uuid.create()+'.jpg');imagesRef.put(this.state.avatarSource.uri).then(function(snapshot){console.log('Uploaded a data_url string!');console.log(snapshot.downloadURL);_reactNativeFirebase2.default.database().ref('user_displays').set({profile_picture:snapshot.downloadURL});}).catch(function(error){console.log('Could not upload image');});}},{key:'onCategoryPressed',value:function onCategoryPressed(){this.setState({displayCategory:'Animation'});}},{key:'onAddCoverPhoto',value:function onAddCoverPhoto(){var _this3=this;ImagePicker.showImagePicker(options,function(response){console.log('Response = ',response);if(response.didCancel){console.log('User cancelled image picker');}else if(response.error){console.log('ImagePicker Error: ',response.error);}else if(response.customButton){console.log('User tapped custom button: ',response.customButton);}else{var source={uri:response.uri};_this3.setState({avatarSource:source});}});}}]);return CreateDisplay;}(_react.Component);exports.default=CreateDisplay;var styles=_reactNative.StyleSheet.create({container:{flex:1,justifyContent:'flex-start',backgroundColor:'white'},navigation:{marginTop:20,flexDirection:'row',justifyContent:'space-between'},cancelButton:{marginTop:12,marginLeft:22},cancelText:{fontFamily:'Monaco',fontSize:16,color:'#5F5D70',backgroundColor:'transparent'},titleText:{marginTop:12,fontFamily:'Monaco',fontSize:16,color:'#35343D',backgroundColor:'transparent'},saveButton:{marginTop:12,marginRight:22},saveText:{fontFamily:'Monaco',fontSize:16,color:'#00CA9D',backgroundColor:'transparent'},mainContainer:{flex:1,justifyContent:'flex-end'},inputContainer:{flex:1,marginLeft:20,marginRight:20,justifyContent:'flex-end'},addDisplayIcon:{alignItems:'center'},displayTitleText:{fontFamily:'Monaco',fontSize:28,color:'#35343D'},displayDescriptionText:{marginTop:10,fontFamily:'Monaco',fontSize:16,color:'#35343D'},categoriesContainer:{marginTop:20,flexDirection:'row',justifyContent:'space-between'},categoryContainer:{justifyContent:'center',alignItems:'center'},categoryImageContainer:{justifyContent:'center',alignItems:'center'},categoryInnerImage:{zIndex:1,position:'absolute'},categoryText:{marginTop:10,fontFamily:'Monaco',fontSize:11,color:'#9B9B9B',letterSpacing:1.1,backgroundColor:'transparent'},cameraContainer:{marginTop:10,height:160,justifyContent:'center',alignItems:'center'},emptyCameraContainer:{flex:1,width:'100%',backgroundColor:'#F6F6F9',justifyContent:'center',alignItems:'center'},cameraIcon:{width:'100%',height:'100%'},cameraText:{marginTop:10,fontFamily:'Monaco',fontSize:10,color:'#5F5D70',backgroundColor:'transparent'},submitButton:{marginTop:20,marginBottom:20,alignItems:'center',justifyContent:'center'},submitText:{position:'absolute',zIndex:5,fontFamily:'Monaco',fontSize:13,color:'white',backgroundColor:'transparent'}});